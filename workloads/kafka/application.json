{
    "name": "kafka",
    "serviceNames": [
        "kafka-serve", "zookeeper"
    ],
    "loadTester": {
        "name": "benchmark-controller",
        "benchmarkController": {
            "parserUrl": "https://s3.amazonaws.com/hyperpilot-benchmark-parsers/kafka/parser.js",
            "command": {
                "image": "hyperpilot/load-tester:kafka",
                "path": "kafka-run-class-wrapper.sh",
                "args": [
                    "org.apache.kafka.tools.ProducerPerformance",
                    "--topic",
                    "tests",
                    "--num-records",
                    "50000",
                    "--producer.config",
                    "/opt/kafka/config/producer.properties",
                    "--record-size",
                    "16384"
                ],
                "serviceConfigs": [
                    {
                        "name": "zookeeper",
                        "hostConfig": {
                            "arg": "--zookeeper-host",
                            "description": "Host of zookeeper"
                        },
                        "portConfig": {
                            "arg": "--zookeeper-port",
                            "description": "Port of zookeeper"
                        }
                    },
                    {
                        "name": "kafka-serve",
                        "hostConfig": {
                            "arg": "--kafka-host",
                            "description": "Host of kafka"
                        },
                        "portConfig": {
                            "arg": "--kafka-port",
                            "description": "Port of kafka"
                        }
                    }
                ],
                "intensityArgs": [
                    {
                        "name": "Throughput throttle",
                        "arg": "--throughput",
                        "startingValue": 3096,
                        "step": 512
                    }
                ]
            },
            "initialize": {
                "image": "hyperpilot\/load-tester:kafka",
                "path": "kafka-delete-and-create-topic.sh",
                "args": [
                    "--partitions",
                    "2",
                    "--replication-factor",
                    "1",
                    "--topic",
                    "tests"
                ],
                "serviceConfigs": [
                    {
                        "name": "zookeeper",
                        "hostConfig": {
                            "arg": "--zookeeper-host",
                            "description": "Host of zookeeper"
                        },
                        "portConfig": {
                            "arg": "--zookeeper-port",
                            "description": "Port of zookeeper"
                        }
                    }
                ]
            }
        }
    },
    "type": "long-running",
    "slo": {
        "metric": "99thLatency",
        "value": 500,
        "type": "latency"
    },
    "budget": {
        "value": 300,
        "unit": "dollar"
    }
}
